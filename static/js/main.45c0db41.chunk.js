(this["webpackJsonpmagic-maze"]=this["webpackJsonpmagic-maze"]||[]).push([[0],{68:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(27),i=a.n(r),o=a(13),c=(a(68),a(69),a(86)),l=a(87),u=a(88),h=a(32),d=a(91),b=a(90),j=a(2),y=a.n(j),p=a(7),v=a(85),O=a(89),f=a(1),x=new h.a({id:"application-0-exwhb"});function m(e){var t=e.setUser,a=function(){var e=Object(p.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.logIn(h.b.anonymous());case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed to connect");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("a",{href:"#",onClick:a,children:"login as guest"})}function g(e){var t=e.email,a=e.password,s=function(){var e=Object(p.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.emailPasswordAuth.registerUser(t,a);case 3:alert("A confirmation mail has been sent to the mailbox."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Invalid email or password");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(v.a,{variant:"secondary",onClick:s,children:"Register"})}function P(e){var t=e.setUser,a=e.email,s=e.password,n=function(){var e=Object(p.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.logIn(h.b.emailPassword(a,s));case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Invalid email or password");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(v.a,{variant:"secondary",onClick:n,children:"Login"})}function k(e){var t=e.setUser,a=function(){var e=Object(p.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.currentUser.logOut();case 3:t(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Failed to connect");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(v.a,{size:"lg",variant:"secondary",onClick:a,children:"Log out"})}function w(e){var t=e.setUser,a=n.a.useState("Login"),s=Object(o.a)(a,2),r=s[0],i=s[1],c=n.a.useState(""),l=Object(o.a)(c,2),u=l[0],h=l[1],d=n.a.useState(""),b=Object(o.a)(d,2),j=b[0],y=b[1],p=n.a.useState(""),v=Object(o.a)(p,2),O=v[0],x=v[1];return n.a.useEffect((function(){h(""),y(""),x("")}),[r]),Object(f.jsxs)("div",{className:"login_form",children:["Register"===r?Object(f.jsx)("input",{type:"username",placeholder:"username",value:u,onChange:function(e){return h(e.target.value)},className:"form_input"}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)("input",{type:"email",placeholder:"email",value:j,onChange:function(e){return y(e.target.value)},className:"form_input"}),Object(f.jsx)("input",{type:"password",placeholder:"password",value:O,onChange:function(e){return x(e.target.value)},className:"form_input"}),"Login"===r?Object(f.jsx)(P,{setUser:t,email:j,password:O}):Object(f.jsx)(g,{email:j,password:O}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"You may also "}),Object(f.jsx)("a",{href:"#",onClick:function(){i((function(e){return"Login"===e?"Register":"Login"}))},children:"Login"===r?"register a new account":"go to login"}),Object(f.jsx)("span",{children:" or "}),Object(f.jsx)(m,{setUser:t})]})]})}function S(e){var t=e.setUser,a=n.a.useState(!1),s=Object(o.a)(a,2),r=s[0],i=s[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,{size:"lg",variant:"secondary",onClick:function(){return i(!0)},children:"Login"}),Object(f.jsxs)(O.a,{show:r,onHide:function(){return i(!1)},children:[Object(f.jsx)(O.a.Header,{closeButton:!0,children:Object(f.jsx)(O.a.Title,{children:"Join us!"})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsx)(w,{setUser:t})})]})]})}function M(e){var t=e.user,a=e.setUser;return Object(f.jsx)("div",{children:Object(f.jsxs)(d.a,{className:"py-4",bg:"dark",variant:"dark",children:[Object(f.jsx)(d.a.Brand,{href:"https://github.com/luyou00001/CSCI-3100-Project-E3\t",children:"Magic Maze"}),Object(f.jsx)(b.a,{children:Object(f.jsx)(d.a.Text,{children:"\u2022 A game created by CSCI3100 Project Group E3"})}),Object(f.jsx)(b.a,{className:"ml-auto",children:t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(d.a.Text,{children:["Your id: ",t.id]}),Object(f.jsx)(b.a.Link,{href:"#home",children:Object(f.jsx)(k,{setUser:a})})]}):Object(f.jsx)(b.a.Link,{href:"#home",children:Object(f.jsx)(S,{setUser:a})})})]})})}var K=a(9),L=a(10),U=a(17),C=a(18),H=function(e){Object(U.a)(a,e);var t=Object(C.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"chatroom",children:Object(f.jsx)("h1",{children:"Chatroom"})})}}]),a}(n.a.Component),B=a(12),N=a(61);a.n(N).a.start();var W=function(e){Object(U.a)(a,e);var t=Object(C.a)(a);function a(e){var s;return Object(K.a)(this,a),(s=t.call(this,e)).state={board:[],entityStates:{entrance:"E",obstacle:"X",empty:" ",player:"O"}},s.setObstacles=s.setObstacles.bind(Object(B.a)(s)),s.setPlayerPosition=s.setPlayerPosition.bind(Object(B.a)(s)),s.setBoard=s.setBoard.bind(Object(B.a)(s)),s}return Object(L.a)(a,[{key:"componentWillMount",value:function(){for(var e=this,t=this.props,a=t.boardHeight,s=t.boardWidth,n=(t.cellHeight,t.cellWidth,t.playerPosition),r=[],i=0;i<a;i++){for(var o=[],c=0;c<s;c++){var l={};l.x=i,l.y=c,n.x===i&&n.y===c?l.state=this.state.entityStates.player:l.state=this.state.entityStates.empty,o.push(l)}r.push(o)}this.setState({board:r,playerPosition:n},(function(){e.setPlayerPosition(n),e.setObstacles(e.props.randomPositions)}))}},{key:"setPlayerPosition",value:function(e){var t=this.state.board;t[e.x][e.y].state=this.state.entityStates.player,this.setState({board:t})}},{key:"componentWillReceiveProps",value:function(e){e===this.props||this.setBoard(e)}},{key:"setBoard",value:function(e){var t=this,a=e.playerPosition,s=e.prevPlayerPos,n=this.state.totalObstaclesLeft;if(void 0!==this.state.totalObstaclesLeft&&0===this.state.totalObstaclesLeft)alert("Game over. Total moves: "+this.props.totalMoves);else{var r=this.state.board,i=a;r[i.x][i.y].state===this.state.entityStates.obstacle&&--n,r[i.x][i.y].state=this.state.entityStates.player,r[s.x][s.y].state=this.state.entityStates.empty,this.setState({board:r,playerPosition:a,totalObstaclesLeft:n},(function(){t.setPlayerPosition(a)}))}}},{key:"setObstacles",value:function(e){for(var t=this.state,a=t.board,s=t.playerPosition,n=0,r=0;r<e.length;r++)e[r].x!==s.x&&e[r].y!==s.y&&a[e[r].x][e[r].y].state!==this.state.entityStates.obstacle&&(++n,a[e[r].x][e[r].y].state=this.state.entityStates.obstacle);this.setState({board:a,totalObstaclesLeft:n})}},{key:"render",value:function(){var e=this.state.board;return Object(f.jsxs)("table",{children:[Object(f.jsxs)("tbody",{children:[" ",e.map((function(e,t){return Object(f.jsxs)("tr",{children:[" ",e.map((function(e,t){return Object(f.jsxs)("td",{style:{border:"2px solid black",margin:0,width:50,height:50,textAlign:"center",verticalAlign:"middle"},children:[Object(f.jsxs)("p",{children:[" ",e.state," "]})," "]},t)}))," "]},t)}))]})," "]})}}]),a}(s.Component),E=a(62),R=a.n(E),D=a(38),T=function(e){Object(U.a)(a,e);var t=Object(C.a)(a);function a(e){var s;return Object(K.a)(this,a),(s=t.call(this,e)).state={showGameBoard:!1,boardHeight:0,boardWidth:0,cellHeight:0,cellWidth:0,randomEntrances:[],randomPositions:[],playerPosition:{x:0,y:0},prevPlayerPos:{x:0,y:0},totalMoves:0},s.generateRandomObstacles=s.generateRandomObstacles.bind(Object(B.a)(s)),s.setEntrances=s.setEntrances.bind(Object(B.a)(s)),s.handleKeyUp=s.handleKeyUp.bind(Object(B.a)(s)),s.handleKeyDown=s.handleKeyDown.bind(Object(B.a)(s)),s.handleKeyRight=s.handleKeyRight.bind(Object(B.a)(s)),s.handleKeyLeft=s.handleKeyLeft.bind(Object(B.a)(s)),s.countTotalMoves=s.countTotalMoves.bind(Object(B.a)(s)),s.initializeBoardPlayer=s.initializeBoardPlayer.bind(Object(B.a)(s)),s.startGame=s.startGame.bind(Object(B.a)(s)),s}return Object(L.a)(a,[{key:"componentWillMount",value:function(){this.initializeBoardPlayer()}},{key:"initializeBoardPlayer",value:function(){var e=this;this.setState({boardHeight:5,boardWidth:5,areaWidth:5,areaHeight:5,playerPosition:{x:0,y:0},showGameBoard:!0},(function(){e.startGame()}))}},{key:"startGame",value:function(){this.generateRandomObstacles(),this.setEntrances()}},{key:"generateRandomObstacles",value:function(){var e=this.state.randomPositions,t=[],a=this.state,s=a.boardHeight,n=a.boardWidth,r=0;r=Number(s)<Number(n)?s:n;for(var i=0;i<Math.ceil(r/2);i++)t.push(R.a.random(0,r-1));for(var o=0;o<t.length;o++)for(var c=0;c<t.length;c++){var l={x:t[o],y:t[c]};e.includes(l)||e.push(l)}this.setState({randomPositions:e})}},{key:"setEntrances",value:function(){for(var e,t=this.state,a=t.randomEntrances,s=t.boardHeight,n=t.boardWidth,r=0;r<s;r++)for(var i=0;i<n;i++){a.push([]);for(var o=[[1,-1],[1,0],[0,1],[-1,1]],c=4;c>0;){var l=r+o[e=Math.floor(Math.random()*c)][0],u=i+o[e][1];l<0||l>=s||u<0||u>=s?(a[i+r*n].push([]),a[i+r*n][4-c].push(r),a[i+r*n][4-c].push(i)):(a[i+r*n].push([]),a[i+r*n][4-c].push(l),a[i+r*n][4-c].push(u)),c--,o.splice(e,1)}}this.setState({randomEntrances:a})}},{key:"countTotalMoves",value:function(){this.setState({totalMoves:++this.state.totalMoves})}},{key:"handleKeyUp",value:function(e){e.preventDefault();var t=this.state.playerPosition,a={x:t.x,y:t.y},s=t.x;Number(s)-1>=0&&(--s,t.x=s,this.setState({playerPosition:t,prevPlayerPos:a}),this.countTotalMoves())}},{key:"handleKeyDown",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,s=t.boardHeight,n={x:a.x,y:a.y},r=a.x;Number(r)+1<s&&(++r,a.x=r,this.setState({playerPosition:a,prevPlayerPos:n}),this.countTotalMoves())}},{key:"handleKeyRight",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,s=t.boardWidth,n={x:a.x,y:a.y},r=a.y;Number(r)+1<s&&(++r,a.y=r,this.setState({playerPosition:a,prevPlayerPos:n}),this.countTotalMoves())}},{key:"handleKeyLeft",value:function(e){e.preventDefault();var t=this.state.playerPosition,a={x:t.x,y:t.y},s=t.y;Number(s)-1>=0&&(--s,t.y=s,this.setState({playerPosition:t,prevPlayerPos:a}),this.countTotalMoves())}},{key:"render",value:function(){var e=this.state,t=e.playerPosition,a=e.randomEntrances,s=e.boardWidth,n=t.x+t.y*s,r="Entrance: ";if(a[n])for(var i=0;i<4;i++)r+="("+a[n][i][0]+", "+a[n][i][1]+") ";return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"status",children:r}),Object(f.jsx)(D.a,{keyValue:"ArrowUp",onKeyHandle:this.handleKeyUp})," ",Object(f.jsx)(D.a,{keyValue:"ArrowDown",onKeyHandle:this.handleKeyDown})," ",Object(f.jsx)(D.a,{keyValue:"ArrowRight",onKeyHandle:this.handleKeyRight})," ",Object(f.jsx)(D.a,{keyValue:"ArrowLeft",onKeyHandle:this.handleKeyLeft}),this.state.showGameBoard&&Object(f.jsx)(W,{randomPositions:this.state.randomPositions,boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,playerPosition:this.state.playerPosition,prevPlayerPos:this.state.prevPlayerPos,totalMoves:this.state.totalMoves})," "]})}}]),a}(s.Component);function z(e){var t=e.setMode;return Object(f.jsx)(v.a,{size:"lg",variant:"primary",onClick:function(){t("Demo")},children:"Demo"})}var A=function(e){Object(U.a)(a,e);var t=Object(C.a)(a);function a(e){var s;return Object(K.a)(this,a),(s=t.call(this,e)).state={mode:""},s.setMode=s.setMode.bind(Object(B.a)(s)),s}return Object(L.a)(a,[{key:"setMode",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"menu",children:[Object(f.jsx)("h1",{children:"Menu"}),Object(f.jsx)(z,{setMode:this.setMode}),"Demo"===this.state.mode?Object(f.jsx)(T,{}):Object(f.jsx)(f.Fragment,{})]})}}]),a}(n.a.Component),G=new h.a({id:"application-0-exwhb"});var I=function(){var e=n.a.useState(G.currentUser),t=Object(o.a)(e,2),a=t[0],s=t[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(M,{user:a,setUser:s}),Object(f.jsx)(c.a,{fluid:!0,children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(u.a,{children:Object(f.jsx)(H,{})}),Object(f.jsx)(u.a,{children:Object(f.jsx)(A,{})})]})})]})};i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.45c0db41.chunk.js.map