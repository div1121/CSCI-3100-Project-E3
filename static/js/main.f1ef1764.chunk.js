(this["webpackJsonpmagic-maze"]=this["webpackJsonpmagic-maze"]||[]).push([[0],{51:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var s=a(4),n=a.n(s),r=a(31),i=a.n(r),o=a(8),c=a(16),l=a(0),u=a.n(l),h=a(2),d=a(1),b=new c.a({id:"application-0-exwhb"});function p(t){var e=t.setUser,a=function(){var t=Object(h.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.logIn(c.b.anonymous());case 3:a=t.sent,e(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Failed to connect");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)("a",{onClick:a,children:"login as guest"})}function y(t){var e=t.email,a=t.password,s=function(){var t=Object(h.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.emailPasswordAuth.registerUser(e,a);case 3:alert("A confirmation mail has been sent to the mailbox."),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert("Invalid email or password");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)("button",{onClick:s,children:"Register"})}function v(t){var e=t.setUser,a=t.email,s=t.password,n=function(){var t=Object(h.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.logIn(c.b.emailPassword(a,s));case 3:n=t.sent,e(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Invalid email or password");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)("button",{onClick:n,children:"Login"})}function j(t){var e=t.setUser,a=function(){var t=Object(h.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.currentUser.logOut();case 3:e(null),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert("Failed to connect");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)("button",{onClick:a,children:"Log out"})}function f(t){var e=t.setUser,a=n.a.useState("signIn"),s=Object(o.a)(a,2),r=s[0],i=s[1],c=n.a.useState(""),l=Object(o.a)(c,2),u=l[0],h=l[1],b=n.a.useState(""),j=Object(o.a)(b,2),f=j[0],m=j[1],x=n.a.useState(""),O=Object(o.a)(x,2),g=O[0],P=O[1];return n.a.useEffect((function(){h(""),m(""),P("")}),[r]),Object(d.jsxs)("div",{children:["signIn"===r?Object(d.jsxs)("div",{className:"login_form",children:[Object(d.jsx)("input",{type:"email",placeholder:"email",value:f,onChange:function(t){return m(t.target.value)},className:"form_input"}),Object(d.jsx)("input",{type:"password",placeholder:"password",value:g,onChange:function(t){return P(t.target.value)},className:"form_input"}),Object(d.jsx)(v,{setUser:e,email:f,password:g})]}):Object(d.jsxs)("div",{className:"login_form",children:[Object(d.jsx)("input",{type:"username",placeholder:"username",value:u,onChange:function(t){return h(t.target.value)},className:"form_input"}),Object(d.jsx)("input",{type:"email",placeholder:"email",value:f,onChange:function(t){return m(t.target.value)},className:"form_input"}),Object(d.jsx)("input",{type:"password",placeholder:"password",value:g,onChange:function(t){return P(t.target.value)},className:"form_input"}),Object(d.jsx)(y,{email:f,password:g})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:"You may also "}),Object(d.jsx)("a",{onClick:function(){i((function(t){return"signIn"===t?"signUp":"signIn"}))},children:"signIn"===r?"register a new account":"go to login"}),Object(d.jsx)("span",{children:" or "}),Object(d.jsx)(p,{setUser:e})]})]})}function m(t){var e=t.user,a=t.setUser;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"Navbar",children:[Object(d.jsxs)("div",{className:"App_header",children:[Object(d.jsx)("h1",{children:"Magic Maze"}),Object(d.jsx)("div",{children:"A game created by CSCI3100 Project Group E3"})]}),Object(d.jsx)("div",{className:"User_header",children:e?Object(d.jsxs)("div",{children:[Object(d.jsxs)("h2",{children:["Your id: ",e.id]}),Object(d.jsx)(j,{setUser:a})]}):Object(d.jsx)(f,{setUser:a})})]}),Object(d.jsx)("hr",{})]})}var x=a(3),O=a(5),g=a(7),P=a(11),w=a(12),k=a(33);a.n(k).a.start();var S=function(t){Object(P.a)(a,t);var e=Object(w.a)(a);function a(t){var s;return Object(x.a)(this,a),(s=e.call(this,t)).state={board:[],entityStates:{entrance:"E",obstacle:"X",empty:" ",player:"O"}},s.setObstacles=s.setObstacles.bind(Object(g.a)(s)),s.setPlayerPosition=s.setPlayerPosition.bind(Object(g.a)(s)),s.setBoard=s.setBoard.bind(Object(g.a)(s)),s}return Object(O.a)(a,[{key:"componentWillMount",value:function(){for(var t=this,e=this.props,a=e.boardHeight,s=e.boardWidth,n=(e.cellHeight,e.cellWidth,e.playerPosition),r=[],i=0;i<a;i++){for(var o=[],c=0;c<s;c++){var l={};l.x=i,l.y=c,n.x===i&&n.y===c?l.state=this.state.entityStates.player:l.state=this.state.entityStates.empty,o.push(l)}r.push(o)}this.setState({board:r,playerPosition:n},(function(){t.setPlayerPosition(n),t.setObstacles(t.props.randomPositions)}))}},{key:"setPlayerPosition",value:function(t){var e=this.state.board;e[t.x][t.y].state=this.state.entityStates.player,this.setState({board:e})}},{key:"componentWillReceiveProps",value:function(t){t===this.props||this.setBoard(t)}},{key:"setBoard",value:function(t){var e=this,a=t.playerPosition,s=t.prevPlayerPos,n=this.state.totalObstaclesLeft;if(void 0!==this.state.totalObstaclesLeft&&0===this.state.totalObstaclesLeft)alert("Game over. Total moves: "+this.props.totalMoves);else{var r=this.state.board,i=a;r[i.x][i.y].state===this.state.entityStates.obstacle&&--n,r[i.x][i.y].state=this.state.entityStates.player,r[s.x][s.y].state=this.state.entityStates.empty,this.setState({board:r,playerPosition:a,totalObstaclesLeft:n},(function(){e.setPlayerPosition(a)}))}}},{key:"setObstacles",value:function(t){for(var e=this.state,a=e.board,s=e.playerPosition,n=0,r=0;r<t.length;r++)t[r].x!==s.x&&t[r].y!==s.y&&a[t[r].x][t[r].y].state!==this.state.entityStates.obstacle&&(++n,a[t[r].x][t[r].y].state=this.state.entityStates.obstacle);this.setState({board:a,totalObstaclesLeft:n})}},{key:"render",value:function(){var t=this.state.board;return Object(d.jsxs)("table",{children:[Object(d.jsxs)("tbody",{children:[" ",t.map((function(t,e){return Object(d.jsxs)("tr",{children:[" ",t.map((function(t,e){return Object(d.jsxs)("td",{style:{border:"2px solid black",margin:0,width:50,height:50,textAlign:"center",verticalAlign:"middle"},children:[Object(d.jsxs)("p",{children:[" ",t.state," "]})," "]},e)}))," "]},e)}))]})," "]})}}]),a}(s.Component),M=a(34),K=a.n(M),U=a(20),N=function(t){Object(P.a)(a,t);var e=Object(w.a)(a);function a(t){var s;return Object(x.a)(this,a),(s=e.call(this,t)).state={showGameBoard:!1,boardHeight:0,boardWidth:0,cellHeight:0,cellWidth:0,randomEntrances:[],randomPositions:[],playerPosition:{x:0,y:0},prevPlayerPos:{x:0,y:0},totalMoves:0},s.generateRandomObstacles=s.generateRandomObstacles.bind(Object(g.a)(s)),s.setEntrances=s.setEntrances.bind(Object(g.a)(s)),s.handleKeyUp=s.handleKeyUp.bind(Object(g.a)(s)),s.handleKeyDown=s.handleKeyDown.bind(Object(g.a)(s)),s.handleKeyRight=s.handleKeyRight.bind(Object(g.a)(s)),s.handleKeyLeft=s.handleKeyLeft.bind(Object(g.a)(s)),s.countTotalMoves=s.countTotalMoves.bind(Object(g.a)(s)),s.initializeBoardPlayer=s.initializeBoardPlayer.bind(Object(g.a)(s)),s.startGame=s.startGame.bind(Object(g.a)(s)),s}return Object(O.a)(a,[{key:"componentWillMount",value:function(){this.initializeBoardPlayer()}},{key:"initializeBoardPlayer",value:function(){var t=this;this.setState({boardHeight:5,boardWidth:5,areaWidth:5,areaHeight:5,playerPosition:{x:0,y:0},showGameBoard:!0},(function(){t.startGame()}))}},{key:"startGame",value:function(){this.generateRandomObstacles(),this.setEntrances()}},{key:"generateRandomObstacles",value:function(){var t=this.state.randomPositions,e=[],a=this.state,s=a.boardHeight,n=a.boardWidth,r=0;r=Number(s)<Number(n)?s:n;for(var i=0;i<Math.ceil(r/2);i++)e.push(K.a.random(0,r-1));for(var o=0;o<e.length;o++)for(var c=0;c<e.length;c++){var l={x:e[o],y:e[c]};t.includes(l)||t.push(l)}this.setState({randomPositions:t})}},{key:"setEntrances",value:function(){for(var t,e=this.state,a=e.randomEntrances,s=e.boardHeight,n=e.boardWidth,r=0;r<s;r++)for(var i=0;i<n;i++){a.push([]);for(var o=[[1,-1],[1,0],[0,1],[-1,1]],c=4;c>0;){var l=r+o[t=Math.floor(Math.random()*c)][0],u=i+o[t][1];l<0||l>=s||u<0||u>=s?(a[i+r*n].push([]),a[i+r*n][4-c].push(r),a[i+r*n][4-c].push(i)):(a[i+r*n].push([]),a[i+r*n][4-c].push(l),a[i+r*n][4-c].push(u)),c--,o.splice(t,1)}}this.setState({randomEntrances:a})}},{key:"countTotalMoves",value:function(){this.setState({totalMoves:++this.state.totalMoves})}},{key:"handleKeyUp",value:function(t){t.preventDefault();var e=this.state.playerPosition,a={x:e.x,y:e.y},s=e.x;Number(s)-1>=0&&(--s,e.x=s,this.setState({playerPosition:e,prevPlayerPos:a}),this.countTotalMoves())}},{key:"handleKeyDown",value:function(t){t.preventDefault();var e=this.state,a=e.playerPosition,s=e.boardHeight,n={x:a.x,y:a.y},r=a.x;Number(r)+1<s&&(++r,a.x=r,this.setState({playerPosition:a,prevPlayerPos:n}),this.countTotalMoves())}},{key:"handleKeyRight",value:function(t){t.preventDefault();var e=this.state,a=e.playerPosition,s=e.boardWidth,n={x:a.x,y:a.y},r=a.y;Number(r)+1<s&&(++r,a.y=r,this.setState({playerPosition:a,prevPlayerPos:n}),this.countTotalMoves())}},{key:"handleKeyLeft",value:function(t){t.preventDefault();var e=this.state.playerPosition,a={x:e.x,y:e.y},s=e.y;Number(s)-1>=0&&(--s,e.y=s,this.setState({playerPosition:e,prevPlayerPos:a}),this.countTotalMoves())}},{key:"render",value:function(){var t=this.state,e=t.playerPosition,a=t.randomEntrances,s=t.boardWidth,n=e.x+e.y*s,r="Entrance: ";if(a[n])for(var i=0;i<4;i++)r+="("+a[n][i][0]+", "+a[n][i][1]+") ";return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"status",children:r}),Object(d.jsx)(U.a,{keyValue:"ArrowUp",onKeyHandle:this.handleKeyUp})," ",Object(d.jsx)(U.a,{keyValue:"ArrowDown",onKeyHandle:this.handleKeyDown})," ",Object(d.jsx)(U.a,{keyValue:"ArrowRight",onKeyHandle:this.handleKeyRight})," ",Object(d.jsx)(U.a,{keyValue:"ArrowLeft",onKeyHandle:this.handleKeyLeft}),this.state.showGameBoard&&Object(d.jsx)(S,{randomPositions:this.state.randomPositions,boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,playerPosition:this.state.playerPosition,prevPlayerPos:this.state.prevPlayerPos,totalMoves:this.state.totalMoves})," "]})}}]),a}(s.Component),H=(a(51),new c.a({id:"application-0-exwhb"}));var W=function(){var t=n.a.useState(H.currentUser),e=Object(o.a)(t,2),a=e[0],s=e[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(m,{user:a,setUser:s}),Object(d.jsx)(N,{})]})};i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(W,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.f1ef1764.chunk.js.map