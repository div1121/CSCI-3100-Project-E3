(this["webpackJsonpmagic-maze"]=this["webpackJsonpmagic-maze"]||[]).push([[0],{67:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(28),i=a.n(n),o=a(15),c=(a(67),a(68),a(86)),l=a(87),d=a(88),h=a(33),u=a(91),b=a(90),j=a(2),y=a.n(j),p=a(7),v=a(85),m=a(89),O=a(1),f=new h.a({id:"application-0-exwhb"});function x(e){var t=e.setUser,a=function(){var e=Object(p.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.logIn(h.b.anonymous());case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed to connect");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("a",{href:"#",onClick:a,children:"login as guest"})}function g(e){var t=e.email,a=e.password,r=function(){var e=Object(p.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.emailPasswordAuth.registerUser(t,a);case 3:alert("A confirmation mail has been sent to the mailbox."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Invalid email or password");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(v.a,{variant:"secondary",onClick:r,children:"Register"})}function P(e){var t=e.setUser,a=e.email,r=e.password,s=function(){var e=Object(p.a)(y.a.mark((function e(){var s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.logIn(h.b.emailPassword(a,r));case 3:s=e.sent,t(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Invalid email or password");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(v.a,{variant:"secondary",onClick:s,children:"Login"})}function k(e){var t=e.setUser,a=function(){var e=Object(p.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.currentUser.logOut();case 3:t(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Failed to connect");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(v.a,{size:"lg",variant:"secondary",onClick:a,children:"Log out"})}function w(e){var t=e.setUser,a=s.a.useState("Login"),r=Object(o.a)(a,2),n=r[0],i=r[1],c=s.a.useState(""),l=Object(o.a)(c,2),d=l[0],h=l[1],u=s.a.useState(""),b=Object(o.a)(u,2),j=b[0],y=b[1],p=s.a.useState(""),v=Object(o.a)(p,2),m=v[0],f=v[1];return s.a.useEffect((function(){h(""),y(""),f("")}),[n]),Object(O.jsxs)("div",{className:"login_form",children:["Register"===n?Object(O.jsx)("input",{type:"username",placeholder:"username",value:d,onChange:function(e){return h(e.target.value)},className:"form_input"}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("input",{type:"email",placeholder:"email",value:j,onChange:function(e){return y(e.target.value)},className:"form_input"}),Object(O.jsx)("input",{type:"password",placeholder:"password",value:m,onChange:function(e){return f(e.target.value)},className:"form_input"}),"Login"===n?Object(O.jsx)(P,{setUser:t,email:j,password:m}):Object(O.jsx)(g,{email:j,password:m}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"You may also "}),Object(O.jsx)("a",{href:"#",onClick:function(){i((function(e){return"Login"===e?"Register":"Login"}))},children:"Login"===n?"register a new account":"go to login"}),Object(O.jsx)("span",{children:" or "}),Object(O.jsx)(x,{setUser:t})]})]})}function M(e){var t=e.setUser,a=s.a.useState(!1),r=Object(o.a)(a,2),n=r[0],i=r[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)(v.a,{size:"lg",variant:"secondary",onClick:function(){return i(!0)},children:"Login"}),Object(O.jsxs)(m.a,{show:n,onHide:function(){return i(!1)},children:[Object(O.jsx)(m.a.Header,{closeButton:!0,children:Object(O.jsx)(m.a.Title,{children:"Join us!"})}),Object(O.jsx)(m.a.Body,{children:Object(O.jsx)(w,{setUser:t})})]})]})}function _(e){var t=e.user,a=e.setUser;return Object(O.jsx)("div",{children:Object(O.jsxs)(u.a,{className:"py-4",bg:"dark",variant:"dark",children:[Object(O.jsx)(u.a.Brand,{href:"https://github.com/luyou00001/CSCI-3100-Project-E3\t",children:"Magic Maze"}),Object(O.jsx)(b.a,{children:Object(O.jsx)(u.a.Text,{children:"\u2022 A game created by CSCI3100 Project Group E3"})}),Object(O.jsx)(b.a,{className:"ml-auto",children:t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(u.a.Text,{children:["Your id: ",t.id]}),Object(O.jsx)(b.a.Link,{href:"#home",children:Object(O.jsx)(k,{setUser:a})})]}):Object(O.jsx)(b.a.Link,{href:"#home",children:Object(O.jsx)(M,{setUser:a})})})]})})}var S=a(8),C=a(10),H=a(13),W=a(14),E=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"chat_room",children:Object(O.jsx)("h1",{children:"Chat room"})})}}]),a}(s.a.Component),K=a(12),L=a(61);a.n(L).a.start();var U=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(e){var r;return Object(S.a)(this,a),(r=t.call(this,e)).state={board:[],entityStates:{entrance:"E",obstacle:"X",empty:" ",player:"O"}},r.setObstacles=r.setObstacles.bind(Object(K.a)(r)),r.setPlayerPosition=r.setPlayerPosition.bind(Object(K.a)(r)),r.setBoard=r.setBoard.bind(Object(K.a)(r)),r}return Object(C.a)(a,[{key:"componentWillMount",value:function(){for(var e=this,t=this.props,a=t.boardHeight,r=t.boardWidth,s=(t.cellHeight,t.cellWidth,t.playerPosition),n=[],i=0;i<a;i++){for(var o=[],c=0;c<r;c++){var l={};l.x=i,l.y=c,s.x===i&&s.y===c?l.state=this.state.entityStates.player:l.state=this.state.entityStates.empty,o.push(l)}n.push(o)}this.setState({board:n,playerPosition:s},(function(){e.setPlayerPosition(s),e.setObstacles(e.props.randomPositions)}))}},{key:"setPlayerPosition",value:function(e){var t=this.state.board;t[e.x][e.y].state=this.state.entityStates.player,this.setState({board:t})}},{key:"componentWillReceiveProps",value:function(e){e===this.props||this.setBoard(e)}},{key:"setBoard",value:function(e){var t=this,a=e.playerPosition,r=e.prevPlayerPos,s=this.state.totalObstaclesLeft;if(void 0!==this.state.totalObstaclesLeft&&0===this.state.totalObstaclesLeft)alert("Game over. Total moves: "+this.props.totalMoves);else{var n=this.state.board,i=a;n[i.x][i.y].state===this.state.entityStates.obstacle&&--s,n[i.x][i.y].state=this.state.entityStates.player,n[r.x][r.y].state=this.state.entityStates.empty,this.setState({board:n,playerPosition:a,totalObstaclesLeft:s},(function(){t.setPlayerPosition(a)}))}}},{key:"setObstacles",value:function(e){for(var t=this.state,a=t.board,r=t.playerPosition,s=0,n=0;n<e.length;n++)e[n].x!==r.x&&e[n].y!==r.y&&a[e[n].x][e[n].y].state!==this.state.entityStates.obstacle&&(++s,a[e[n].x][e[n].y].state=this.state.entityStates.obstacle);this.setState({board:a,totalObstaclesLeft:s})}},{key:"render",value:function(){var e=this.state.board;return Object(O.jsxs)("table",{children:[Object(O.jsxs)("tbody",{children:[" ",e.map((function(e,t){return Object(O.jsxs)("tr",{children:[" ",e.map((function(e,t){return Object(O.jsxs)("td",{style:{border:"2px solid black",margin:0,width:50,height:50,textAlign:"center",verticalAlign:"middle"},children:[Object(O.jsxs)("p",{children:[" ",e.state," "]})," "]},t)}))," "]},t)}))]})," "]})}}]),a}(r.Component),N=(a(81),a(24)),B=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(e){var r;return Object(S.a)(this,a),(r=t.call(this,e)).state={showGameBoard:!1,boardHeight:0,boardWidth:0,areaHeight:0,areaWidth:0,randomEntrances:[],randomPositions:[],playerPosition:{x:0,y:0},prevPlayerPos:{x:0,y:0},totalMoves:0},r.setEntrances=r.setEntrances.bind(Object(K.a)(r)),r.handleKeyUp=r.handleKeyUp.bind(Object(K.a)(r)),r.handleKeyDown=r.handleKeyDown.bind(Object(K.a)(r)),r.handleKeyRight=r.handleKeyRight.bind(Object(K.a)(r)),r.handleKeyLeft=r.handleKeyLeft.bind(Object(K.a)(r)),r.countTotalMoves=r.countTotalMoves.bind(Object(K.a)(r)),r.initializeBoardPlayer=r.initializeBoardPlayer.bind(Object(K.a)(r)),r.startGame=r.startGame.bind(Object(K.a)(r)),r}return Object(C.a)(a,[{key:"componentWillMount",value:function(){this.initializeBoardPlayer()}},{key:"initializeBoardPlayer",value:function(){var e=this;this.setState({boardHeight:5,boardWidth:5,areaWidth:5,areaHeight:5,playerPosition:{x:2,y:2},prevPlayerPos:{x:2,y:2},showGameBoard:!0},(function(){e.startGame()}))}},{key:"startGame",value:function(){this.setEntrances()}},{key:"setEntrances",value:function(){for(var e,t=this.state,a=t.randomEntrances,r=t.boardHeight,s=t.boardWidth,n=0;n<r;n++)for(var i=0;i<s;i++){a.push([]);for(var o=[[1,-1],[1,0],[0,1],[-1,1]],c=4;c>0;){var l=n+o[e=Math.floor(Math.random()*c)][0],d=i+o[e][1];l<0||l>=r||d<0||d>=r?(a[i+n*s].push([]),a[i+n*s][4-c].push(n),a[i+n*s][4-c].push(i)):(a[i+n*s].push([]),a[i+n*s][4-c].push(l),a[i+n*s][4-c].push(d)),c--,o.splice(e,1)}}this.setState({randomEntrances:a})}},{key:"countTotalMoves",value:function(){this.setState({totalMoves:++this.state.totalMoves})}},{key:"handleKeyUp",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,r=t.randomEntrances,s=t.boardHeight,n=t.boardWidth,i=t.areaWidth,o=t.areaHeight,c={x:a.x,y:a.y},l=a.x,d=a.y;if(Number(d)%o-1>=0){var h=l%i,u=--d%o;if(0===h&&0===u||h===i-1&&0===u||h===i-1&&u===o-1||0===h&&u===o-1){var b;b=0===h&&0===u?0:h===i-1&&0===u?1:h===i-1&&u===o-1?2:3;var j=Math.floor(h/n),y=Math.floor(u/s);h=r[j+y*n][b][0]*i+2,u=r[j+y*n][b][1]*o+2,a.x=h,a.y=u}else a.y=d;this.setState({playerPosition:a,prevPlayerPos:c}),this.countTotalMoves()}}},{key:"handleKeyDown",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,r=t.randomEntrances,s=t.boardHeight,n=t.boardWidth,i=t.areaWidth,o=t.areaHeight,c={x:a.x,y:a.y},l=a.x,d=a.y;if(Number(d)%o+1<o){var h=l%i,u=++d%o;if(0===h&&0===u||h===i-1&&0===u||h===i-1&&u===o-1||0===h&&u===o-1){var b;b=0===h&&0===u?0:h===i-1&&0===u?1:h===i-1&&u===o-1?2:3;var j=Math.floor(h/n),y=Math.floor(u/s);h=r[j+y*n][b][0]*i+2,u=r[j+y*n][b][1]*o+2,a.x=h,a.y=u}else a.y=d;this.setState({playerPosition:a,prevPlayerPos:c}),this.countTotalMoves()}}},{key:"handleKeyRight",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,r=t.randomEntrances,s=t.boardHeight,n=t.boardWidth,i=t.areaWidth,o=t.areaHeight,c={x:a.x,y:a.y},l=a.x,d=a.y;if(Number(l)%i+1<i){var h=++l%i,u=d%o;if(0===h&&0===u||h===i-1&&0===u||h===i-1&&u===o-1||0===h&&u===o-1){var b;b=0===h&&0===u?0:h===i-1&&0===u?1:h===i-1&&u===o-1?2:3;var j=Math.floor(h/n),y=Math.floor(u/s);h=r[j+y*n][b][0]*i+2,u=r[j+y*n][b][1]*o+2,a.x=h,a.y=u}else a.x=l;this.setState({playerPosition:a,prevPlayerPos:c}),this.countTotalMoves()}}},{key:"handleKeyLeft",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,r=t.randomEntrances,s=t.boardHeight,n=t.boardWidth,i=t.areaWidth,o=t.areaHeight,c={x:a.x,y:a.y},l=a.x,d=a.y;if(Number(l)%i-1>=0){var h=--l%i,u=d%o;if(0===h&&0===u||h===i-1&&0===u||h===i-1&&u===o-1||0===h&&u===o-1){var b;b=0===h&&0===u?0:h===i-1&&0===u?1:h===i-1&&u===o-1?2:3;var j=Math.floor(h/n),y=Math.floor(u/s);h=r[j+y*n][b][0]*i+2,u=r[j+y*n][b][1]*o+2,a.x=h,a.y=u}else a.x=l;this.setState({playerPosition:a,prevPlayerPos:c}),this.countTotalMoves()}}},{key:"render",value:function(){var e=this.state,t=e.playerPosition,a=(e.randomEntrances,e.boardWidth,"("+t.x+", "+t.y+")");return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"status",children:a}),Object(O.jsx)(N.b,{keyEventName:N.a,keyValue:"ArrowUp",onKeyHandle:this.handleKeyUp}),Object(O.jsx)(N.b,{keyEventName:N.a,keyValue:"ArrowDown",onKeyHandle:this.handleKeyDown}),Object(O.jsx)(N.b,{keyEventName:N.a,keyValue:"ArrowRight",onKeyHandle:this.handleKeyRight}),Object(O.jsx)(N.b,{keyEventName:N.a,keyValue:"ArrowLeft",onKeyHandle:this.handleKeyLeft}),this.state.showGameBoard&&Object(O.jsx)(U,{randomPositions:this.state.randomPositions,boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,areaWidth:this.state.areaWidth,areaHeight:this.state.areaHeight,playerPosition:this.state.playerPosition,prevPlayerPos:this.state.prevPlayerPos,totalMoves:this.state.totalMoves})," "]})}}]),a}(r.Component),D=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){var e="Ready";return this.props.isready&&(e="Cancel"),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.props.playername}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:this.props.handleready,children:e})})]})}}]),a}(r.Component),R=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(e){var r;return Object(S.a)(this,a),(r=t.call(this,e)).state={room_name:r.props.roomname,player_list:r.props.player_list,player_num:r.props.player_num,ready_num:0,ready_state:Array(4).fill(!1)},r.addready=r.addready.bind(Object(K.a)(r)),r.minusready=r.minusready.bind(Object(K.a)(r)),r}return Object(C.a)(a,[{key:"addready",value:function(e){var t=this.state.ready_state;t[e]=!0;var a=this.state.ready_num+1;this.setState({ready_num:a,ready_state:t})}},{key:"minusready",value:function(e){var t=this.state.ready_state;t[e]=!1;var a=this.state.ready_num-1;a<0||this.setState({ready_num:a,ready_state:t})}},{key:"render",value:function(){for(var e=this,t=[0,0,0,0],a=function(a){e.state.ready_state[a]?t[a]=function(){return e.minusready(a)}:t[a]=function(){return e.addready(a)}},r=0;r<4;r++)a(r);return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:this.props.room_name}),Object(O.jsxs)("table",{children:[Object(O.jsx)(D,{isready:this.state.ready_state[0],playername:this.props.player_list[0],handleready:t[0]}),Object(O.jsx)(D,{isready:this.state.ready_state[1],playername:this.props.player_list[1],handleready:t[1]}),Object(O.jsx)(D,{isready:this.state.ready_state[2],playername:this.props.player_list[2],handleready:t[2]}),Object(O.jsx)(D,{isready:this.state.ready_state[3],playername:this.props.player_list[3],handleready:t[3]})]}),Object(O.jsxs)("h2",{children:["Number of ready: ",this.state.ready_num]})]})}}]),a}(r.Component);function z(e){var t=e.setMode;return Object(O.jsx)(v.a,{size:"lg",variant:"primary",onClick:function(){t("Demo")},children:"Demo"})}function A(e){var t=e.setMode;return Object(O.jsx)(v.a,{size:"lg",variant:"primary",onClick:function(){t("CustomRoom")},children:"Custom room"})}var T=function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(e){var r;return Object(S.a)(this,a),(r=t.call(this,e)).state={mode:""},r.setMode=r.setMode.bind(Object(K.a)(r)),r}return Object(C.a)(a,[{key:"setMode",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"menu",children:[Object(O.jsx)("h1",{children:"Menu"}),Object(O.jsx)(z,{setMode:this.setMode}),Object(O.jsx)(A,{setMode:this.setMode}),"Demo"===this.state.mode?Object(O.jsx)(B,{}):Object(O.jsx)(O.Fragment,{}),"CustomRoom"===this.state.mode?Object(O.jsx)(R,{room_name:"Game1",player_list:["Paul","Alice","Sun","Jason"],player_num:4}):Object(O.jsx)(O.Fragment,{})]})}}]),a}(s.a.Component),G=new h.a({id:"application-0-exwhb"});var I=function(){var e=s.a.useState(G.currentUser),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)(_,{user:a,setUser:r}),Object(O.jsx)(c.a,{fluid:!0,children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(E,{})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(T,{})})]})})]})};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(I,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.e112b3ed.chunk.js.map