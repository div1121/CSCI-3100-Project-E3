(this["webpackJsonpmagic-maze"]=this["webpackJsonpmagic-maze"]||[]).push([[0],{111:function(e,t,a){},246:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),o=a.n(s),i=a(9),c=(a(111),a(112),a(250)),l=a(251),d=a(252),u=a(255),h=a(254),m=a(24),j=a.n(m),b=a(36),p=a(248),y=a(253),f=a(103),v=a.n(f).a.create({baseURL:"http://localhost:9000"}),O=a(61),x=a.n(O),g=a(1);function k(e){var t=e.setUserID,a=e.setUsername,n=e.name,r=e.email,s=e.password,o=e.rePassword,i=function(){var e=Object(b.a)(j.a.mark((function e(i){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),c=!1,0!=n.length){e.next=6;break}alert("Name is empty!"),e.next=37;break;case 6:if(0!=r.length){e.next=10;break}alert("Email is empty!"),e.next=37;break;case 10:if(0!=x.a.isEmail(r)){e.next=14;break}alert("Email does not exist!"),e.next=37;break;case 14:if(0!=s.length){e.next=18;break}alert("Password is empty!"),e.next=37;break;case 18:if(!(s.length<8)){e.next=22;break}alert("Password should contain at least 8 letters!"),e.next=37;break;case 22:if(s==o){e.next=26;break}alert("Re-entered password is not same to new password!"),e.next=37;break;case 26:return e.prev=26,e.next=29,v.post("/loginAccount",{email:r}).then((function(e){0==e.data.length?c=!0:alert("This email has been used for registration. You may register with another email or login.")}));case 29:if(!c){e.next=32;break}return e.next=32,v.post("/createAccount",{name:n,email:r,password:s}).then((function(e){t(e.data._id),a(e.data.name),sessionStorage.setItem("userID",e.data._id),sessionStorage.setItem("username",e.data.name),alert("Register successfully")}));case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(26),alert("Internal error");case 37:case"end":return e.stop()}}),e,null,[[26,34]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(p.a,{variant:"secondary",onClick:i,children:"Register"})}function _(e){var t=e.setUserID,a=e.setUsername,n=e.email,r=e.password,s=function(){var e=Object(b.a)(j.a.mark((function e(s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,e.next=4,v.post("/loginAccount",{email:n,password:r}).then((function(e){0==e.data.length?alert("Invalid email or password"):(t(e.data[0]._id),a(e.data[0].name),sessionStorage.setItem("userID",e.data[0]._id),sessionStorage.setItem("username",e.data[0].name),alert("Login successfully"))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("Internal Error");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(p.a,{variant:"secondary",onClick:s,children:"Login"})}function w(e){var t=e.setUserID,a=e.setUsername,n=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(null),a(null),sessionStorage.clear(),alert("Logout successfully")}catch(n){alert("Failed to connect")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(p.a,{size:"lg",variant:"secondary",onClick:n,children:"Log out"})}function S(e){var t=e.setUserID,a=e.setUsername,n=r.a.useState("Login"),s=Object(i.a)(n,2),o=s[0],c=s[1],l=r.a.useState(""),d=Object(i.a)(l,2),u=d[0],h=d[1],m=r.a.useState(""),j=Object(i.a)(m,2),b=j[0],p=j[1],y=r.a.useState(""),f=Object(i.a)(y,2),v=f[0],O=f[1],x=r.a.useState(""),w=Object(i.a)(x,2),S=w[0],P=w[1];return r.a.useEffect((function(){h(""),p(""),O(""),P("")}),[o]),Object(g.jsxs)("div",{className:"login_form",children:["Register"===o?Object(g.jsx)("input",{type:"name",placeholder:"name",value:u,onChange:function(e){return h(e.target.value)},className:"form_input"}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)("input",{type:"email",placeholder:"email",value:b,onChange:function(e){return p(e.target.value)},className:"form_input"}),Object(g.jsx)("input",{type:"password",placeholder:"password",value:v,onChange:function(e){return O(e.target.value)},className:"form_input"}),"Register"===o?Object(g.jsx)("input",{type:"password",placeholder:"Re-enter password",value:S,onChange:function(e){return P(e.target.value)},className:"form_input"}):Object(g.jsx)(g.Fragment,{}),"Login"===o?Object(g.jsx)(_,{setUserID:t,setUsername:a,email:b,password:v}):Object(g.jsx)(k,{setUserID:t,setUsername:a,name:u,email:b,password:v,rePassword:S}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"You may also "}),Object(g.jsx)("a",{href:"#",onClick:function(){c((function(e){return"Login"===e?"Register":"Login"}))},children:"Login"===o?"register a new account":"go to login"})]})]})}function P(e){var t=e.setUserID,a=e.setUsername,n=r.a.useState(!1),s=Object(i.a)(n,2),o=s[0],c=s[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)(p.a,{size:"lg",variant:"secondary",onClick:function(){return c(!0)},children:"Login"}),Object(g.jsxs)(y.a,{show:o,onHide:function(){return c(!1)},children:[Object(g.jsx)(y.a.Header,{closeButton:!0,children:Object(g.jsx)(y.a.Title,{children:"Join us!"})}),Object(g.jsx)(y.a.Body,{children:Object(g.jsx)(S,{setUserID:t,setUsername:a})})]})]})}function M(e){var t=e.userID,a=e.password,n=e.newPassword,r=e.reNewPassword,s=e.setShow,o=function(){var e=Object(b.a)(j.a.mark((function e(o){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,o.preventDefault(),e.prev=2,e.next=5,v.post("/loginAccount",{_id:t,password:a}).then((function(e){0==e.data.length?alert("Password is wrong"):0==n.length?alert("New password is empty!"):n.length<8?alert("New password should contain at least 8 letters!"):n!=r?alert("Re-entered new password is not same to new password!"):i=!0}));case 5:if(!i){e.next=8;break}return e.next=8,v.post("/updateAccount",{_id:t,password:n}).then((function(e){1==e.data.ok&&alert("Password is updated"),s(!1)}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("Internal Error");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(p.a,{variant:"primary",onClick:o,children:"Confirm"})}function C(e){var t=e.userID,a=r.a.useState(!1),n=Object(i.a)(a,2),s=n[0],o=n[1],c=r.a.useState(""),l=Object(i.a)(c,2),d=l[0],u=l[1],h=r.a.useState(""),m=Object(i.a)(h,2),j=m[0],b=m[1],f=r.a.useState(""),v=Object(i.a)(f,2),O=v[0],x=v[1];return r.a.useEffect((function(){u(""),b(""),x("")}),[s]),Object(g.jsxs)("div",{children:[Object(g.jsx)(p.a,{size:"md",variant:"secondary",onClick:function(){return o(!0)},children:"Change password"}),Object(g.jsxs)(y.a,{show:s,onHide:function(){return o(!1)},children:[Object(g.jsx)(y.a.Header,{closeButton:!0,children:Object(g.jsx)(y.a.Title,{children:"Change password"})}),Object(g.jsx)(y.a.Body,{children:Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"password",value:d,placeholder:"Current password",onChange:function(e){return u(e.target.value)},className:"form_input"})}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"password",value:j,placeholder:"New password",onChange:function(e){return b(e.target.value)},className:"form_input"})}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"password",value:O,placeholder:"Re-enter new password",onChange:function(e){return x(e.target.value)},className:"form_input"})})]})}),Object(g.jsx)(y.a.Footer,{children:Object(g.jsx)(M,{userID:t,password:d,newPassword:j,reNewPassword:O,setShow:o})})]})]})}function D(e){var t=e.userID,a=e.username,n=(e.setUsername,r.a.useState(!1)),s=Object(i.a)(n,2),o=s[0],c=s[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)(p.a,{size:"lg",variant:"secondary",onClick:function(){return c(!0)},children:"Profile"}),Object(g.jsxs)(y.a,{show:o,onHide:function(){return c(!1)},children:[Object(g.jsx)(y.a.Header,{closeButton:!0,children:Object(g.jsx)(y.a.Title,{children:"Player profile"})}),Object(g.jsxs)(y.a.Body,{children:[Object(g.jsxs)("div",{children:["Name: ",a]}),Object(g.jsx)("div",{children:"Symbol: #"}),Object(g.jsx)("div",{children:"Game record: "})]}),Object(g.jsxs)(y.a.Footer,{children:[Object(g.jsx)(C,{userID:t}),Object(g.jsx)(p.a,{variant:"primary",children:"Save changes"})]})]})]})}function R(e){var t=e.userID,a=e.username,n=e.setUserID,r=e.setUsername;return Object(g.jsx)("div",{children:Object(g.jsxs)(u.a,{className:"py-4",bg:"dark",variant:"dark",children:[Object(g.jsx)(u.a.Brand,{href:"https://github.com/luyou00001/CSCI-3100-Project-E3\t",children:"Magic Maze"}),Object(g.jsx)(h.a,{children:Object(g.jsx)(u.a.Text,{children:"\u2022 A game created by CSCI3100 Project Group E3"})}),Object(g.jsx)(h.a,{className:"ml-auto"}),null===t?Object(g.jsx)(h.a.Link,{href:"#home",children:Object(g.jsx)(P,{setUserID:n,setUsername:r})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(u.a.Brand,{children:["Welcome ",a]}),Object(g.jsx)(h.a.Link,{href:"#home",children:Object(g.jsx)(D,{userID:t,username:a,setUsername:r})}),Object(g.jsx)(h.a.Link,{href:"#home",children:Object(g.jsx)(w,{setUserID:n,setUsername:r})})]})]})})}var I=a(249);function N(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(g.jsxs)("button",{className:"MenuButton",onClick:function(){r(!a)},children:["Matching ",a?Object(g.jsx)(I.a,{animation:"border",role:"status"}):Object(g.jsx)(g.Fragment,{})]})}function U(e){var t=e.setMode;return Object(g.jsx)("button",{className:"MenuButton",onClick:function(){t("FindingRoom")},children:"Custom room"})}function H(e){var t=e.setMode;return Object(g.jsx)("button",{className:"MenuButton",onClick:function(){t("Demo")},children:"Demo"})}var E=function(e){var t=e.setMode;return Object(g.jsxs)("div",{className:"menu",children:[Object(g.jsx)("h1",{children:"Menu"}),Object(g.jsx)("div",{children:Object(g.jsx)(N,{})}),Object(g.jsx)("div",{children:Object(g.jsx)(U,{setMode:t})}),Object(g.jsx)("div",{children:Object(g.jsx)(H,{setMode:t})})]})},L=a(51),W=a(14),B=a(15),G=a(8),K=a(17),A=a(16),z=a(105),F=a.n(z)()("http://localhost:9000"),T=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={roomid:n.props.roomid,playerid:n.props.userid,name:n.props.name,value:"",history:[]},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(G.a)(n)),n}return Object(B.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(L.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t={roomid:this.state.roomid,userid:this.state.playerid,name:this.state.name,message:this.state.value};F.emit("messages",t),this.setState({value:""}),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this;fetch("/messages?"+new URLSearchParams({roomid:this.props.roomid})).then((function(e){return e.json()})).then((function(t){e.setState({history:t})})),F.on("message",(function(t){var a=e.state.history;a.push(t),e.setState({history:a})}))}},{key:"render",value:function(){for(var e=this.state.history,t=[],a=0;a<e.length;a++){var n=e[a].name,r=e[a].message;t.push(Object(g.jsxs)("div",{children:[n,": ",r]}))}return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Chat Room"}),t,Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{children:"Input Text"}),Object(g.jsx)("br",{}),Object(g.jsx)("textarea",{name:"value",type:"text",value:this.state.value,placeholder:"Send a message",onChange:this.handleChange}),Object(g.jsx)("input",{type:"submit",value:"Submit"})]})]})}}]),a}(r.a.Component),V=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:this.props.roomname}),Object(g.jsxs)("td",{children:[this.props.numofusers,"/4"]}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:this.props.handleadd,children:"Add"})})]})}}]),a}(n.Component),Y=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={room_list:[],input_room_name:"",loading:!1},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleCreateRoom=n.handleCreateRoom.bind(Object(G.a)(n)),n.handleEnterRoom=n.handleEnterRoom.bind(Object(G.a)(n)),n.handleRank=n.handleRank.bind(Object(G.a)(n)),n}return Object(B.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/room").then((function(e){return e.json()})).then((function(t){return e.setState({room_list:t})})),F.on("createroom",(function(t){var a=e.state.room_list;a.push(t),e.setState({room_list:a})})),F.on("addroomlist",(function(t){var a=e.state.room_list,n=a.findIndex((function(e){return e._id===t._id}));-1!==n&&(a[n].numofusers+=1),e.setState({room_list:a})})),F.on("downroomlist",(function(t){var a=e.state.room_list,n=a.findIndex((function(e){return e._id===t._id}));-1!==n&&(a[n].numofusers-=1),e.setState({room_list:a})})),F.on("deleteroom",(function(t){var a=e.state.room_list,n=function(e){return e._id===t._id};-1!==a.findIndex(n)&&a.splice(a.findIndex(n),1),e.setState({room_list:a})})),F.on("getroominfo",(function(t){console.log("OK"),e.setState({loading:!1}),e.props.setGameroomenter(t.roomname),e.props.setGameroomid(t.roomid)})),F.on("failjoin",(function(e){alert("Fail to join the room: "+e.roomname)}))}},{key:"handleRank",value:function(){this.setState({loading:!0}),F.emit("ranking",{userid:this.props.user_id,name:this.props.user_name})}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(L.a)({},n,a))}},{key:"handleCreateRoom",value:function(e){var t={roomname:this.state.input_room_name,userid:this.props.user_id,name:this.props.user_name};F.emit("createroom",t),this.setState({input_room_name:"",loading:!0}),e.preventDefault()}},{key:"handleEnterRoom",value:function(e,t){var a={roomid:e,roomname:t,userid:this.props.user_id,name:this.props.user_name};F.emit("joinroom",a),this.setState({loading:!0})}},{key:"render",value:function(){var e=this,t=this.state.room_list.map((function(t){return Object(g.jsx)(V,{roomname:t.roomname,numofusers:t.numofusers,handleadd:function(){return e.handleEnterRoom(t._id,t.roomname)},loading:e.state.loading})}));return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Room List"}),Object(g.jsx)("table",{children:t}),Object(g.jsx)("form",{onSubmit:this.handleCreateRoom,children:Object(g.jsxs)("fieldset",{children:[Object(g.jsx)("legend",{children:"Create Room:"}),Object(g.jsx)("label",{children:"Room Name"}),Object(g.jsx)("input",{name:"input_room_name",type:"text",value:this.state.input_room_name,onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{type:"submit",value:"Submit"})]})}),Object(g.jsx)("button",{onClick:this.handleRank,children:"Rank"})]})}}]),a}(r.a.Component),J=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e="Ready";return this.props.isready&&(e="Cancel"),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:this.props.playername}),null!=this.props.handleready&&Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:this.props.handleready,children:e})}),this.props.position&&4===this.props.ready_num&&Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:this.props.startGame,children:"Start"})})]})}}]),a}(n.Component),q=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={roomid:n.props.roomid,roomname:n.props.roomname,player_list:[],player_id:[],player_num:0,ready_num:0,ready_state:[]},n.addready=n.addready.bind(Object(G.a)(n)),n.minusready=n.minusready.bind(Object(G.a)(n)),n.handleLeaveRoom=n.handleLeaveRoom.bind(Object(G.a)(n)),n}return Object(B.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/roommember?"+new URLSearchParams({roomid:this.props.roomid})).then((function(e){return e.json()})).then((function(t){for(var a=e.state.player_list,n=e.state.player_id,r=e.state.player_num,s=e.state.ready_num,o=e.state.ready_state,i=0;i<t.length;i++)a.push(t[i].name),n.push(t[i].userid),r++,o.push(t[i].ready),t[i].ready&&s++;e.setState({player_list:a,player_id:n,player_num:r,ready_num:s,ready_state:o})})),F.on("addroommember",(function(t){var a=e.state.player_list,n=e.state.player_id,r=e.state.player_num,s=e.state.ready_state;a.push(t.name),n.push(t.userid),r+=1,s.push(!1),e.setState({player_list:a,player_id:n,player_num:r,ready_state:s})})),F.on("readychange",(function(t){e.setState({ready_num:t.ready_num,ready_state:t.ready_state})})),F.on("decreaseroommember",(function(t){var a=e.state.player_list,n=e.state.player_id,r=e.state.player_num,s=e.state.ready_state,o=e.state.ready_num,i=n.findIndex((function(e){return e===t.userid}));s[i]&&(o-=1),r-=1,a.splice(i,1),s.splice(i,1),n.splice(i,1),e.setState({player_list:a,player_id:n,player_num:r,ready_num:o,ready_state:s})}))}},{key:"addready",value:function(e){var t=this.state.ready_state;t[e]=!0;var a=this.state.ready_num+1;F.emit("readychange",{roomid:this.state.roomid,userid:this.props.playerid,ready_num:a,ready_state:t,save:!0})}},{key:"minusready",value:function(e){var t=this.state.ready_state;t[e]=!1;var a=this.state.ready_num-1;F.emit("readychange",{roomid:this.state.roomid,userid:this.props.playerid,ready_num:a,ready_state:t,save:!1})}},{key:"handleLeaveRoom",value:function(){F.emit("leaveroom",{roomid:this.state.roomid,roomname:this.state.roomname,userid:this.props.playerid,name:this.props.playername}),this.props.setGameroomenter(null),this.props.setGameroomid(null)}},{key:"render",value:function(){for(var e=this,t=[],a=function(a){e.state.player_id[a]===e.props.playerid?e.state.ready_state[a]?t.push((function(){return e.minusready(a)})):t.push((function(){return e.addready(a)})):t.push(null)},n=0;n<this.state.player_num;n++)a(n);for(var r=[],s=0;s<this.state.player_num;s++)r.push(Object(g.jsx)(J,{isready:this.state.ready_state[s],playername:this.state.player_list[s],handleready:t[s],position:0===s&&null!==t[0],ready_num:this.state.ready_num}));return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Game Room"}),Object(g.jsxs)("h1",{children:["You're in: ",this.props.roomname]}),Object(g.jsx)("table",{children:r}),Object(g.jsxs)("h2",{children:["Number of ready: ",this.state.ready_num]}),Object(g.jsx)("button",{onClick:this.handleLeaveRoom,children:"Leave"})]})}}]),a}(n.Component),Q=a(106);a.n(Q).a.start();var X=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={board:[],entityStates:{entrance:"\u256c",empty:"\u3000",player:"\u2642"}},n.setPlayerPosition=n.setPlayerPosition.bind(Object(G.a)(n)),n.setBoard=n.setBoard.bind(Object(G.a)(n)),n}return Object(B.a)(a,[{key:"componentWillMount",value:function(){for(var e=this,t=this.props,a=t.boardHeight,n=t.boardWidth,r=t.areaHeight,s=t.areaWidth,o=t.playerPosition,i=[],c=0;c<a;c++){for(var l=[],d=0;d<n;d++){for(var u=[],h=0;h<r;h++){for(var m=[],j=0;j<s;j++)0===j&&0===h||j===s-1&&0===h||j===s-1&&h===r-1||0===j&&h===r-1?m.push(this.state.entityStates.entrance):o.x===d*s+j&&o.y===c*r+h?m.push(this.state.entityStates.player):m.push(this.state.entityStates.empty);u.push(m)}l.push(u)}i.push(l)}this.setState({board:i,areaHeight:r,areaWidth:s,playerPosition:o},(function(){e.setPlayerPosition(o)}))}},{key:"setPlayerPosition",value:function(e){var t=this.state,a=t.board,n=t.areaHeight,r=t.areaWidth,s=e.x,o=e.y;a[Math.floor(o/n)][Math.floor(s/r)][o%n][s%r]=this.state.entityStates.player,this.setState({board:a})}},{key:"componentWillReceiveProps",value:function(e){e===this.props||this.setBoard(e)}},{key:"setBoard",value:function(e){var t=this,a=e.playerPosition,n=e.prevPlayerPos,r=e.areaHeight,s=e.areaWidth,o=this.state.board,i=n.x,c=n.y,l=a.x,d=a.y;o[Math.floor(c/r)][Math.floor(i/s)][c%r][i%s]=this.state.entityStates.empty,o[Math.floor(d/r)][Math.floor(l/s)][d%r][l%s]=this.state.entityStates.player,this.setState({board:o,playerPosition:a},(function(){t.setPlayerPosition(a)}))}},{key:"render",value:function(){var e=this.state.board;return console.log(e),Object(g.jsx)("div",{children:e.map((function(e,t){return Object(g.jsx)("tr",{children:e.map((function(e,a){var n="blue",r="yellow";return(t+a)%2==0&&(n="yellow",r="blue"),Object(g.jsx)("td",{style:{textAlign:"center",verticalAlign:"middle",backgroundColor:r,color:n},children:Object(g.jsx)("table",{className:"area",cellSpacing:"0",id:"table",border:"3px",width:"100",height:"100",textAlign:"center",children:Object(g.jsx)("tbody",{children:e.map((function(e){return Object(g.jsx)("tr",{children:e.map((function(e){return Object(g.jsx)("td",{className:"area",children:e})}))})}))})})})}))})}))})}}]),a}(n.Component),Z=(a(244),a(28)),$=function(e){Object(K.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={win:!1,showGameBoard:!1,boardHeight:0,boardWidth:0,areaHeight:0,areaWidth:0,randomEntrances:[],randomPositions:[],playerPosition:{x:0,y:0},prevPlayerPos:{x:0,y:0},totalMoves:0},n.initializeBoardPlayer=n.initializeBoardPlayer.bind(Object(G.a)(n)),n.startGame=n.startGame.bind(Object(G.a)(n)),n.setEntrances=n.setEntrances.bind(Object(G.a)(n)),n.countTotalMoves=n.countTotalMoves.bind(Object(G.a)(n)),n.handleKeyUp=n.handleKeyUp.bind(Object(G.a)(n)),n.handleKeyDown=n.handleKeyDown.bind(Object(G.a)(n)),n.handleKeyRight=n.handleKeyRight.bind(Object(G.a)(n)),n.handleKeyLeft=n.handleKeyLeft.bind(Object(G.a)(n)),n.makeMove=n.makeMove.bind(Object(G.a)(n)),n}return Object(B.a)(a,[{key:"componentWillMount",value:function(){this.initializeBoardPlayer()}},{key:"initializeBoardPlayer",value:function(){var e=this,t={x:Math.floor(2.5),y:Math.floor(2.5)},a={x:Math.floor(2.5),y:Math.floor(2.5)};this.setState({boardHeight:5,boardWidth:5,areaWidth:5,areaHeight:5,playerPosition:t,prevPlayerPos:a,showGameBoard:!0},(function(){e.startGame()}))}},{key:"startGame",value:function(){this.setEntrances()}},{key:"setEntrances",value:function(){for(var e,t=this.state,a=t.randomEntrances,n=t.boardHeight,r=t.boardWidth,s=0;s<n;s++)for(var o=0;o<r;o++){a.push([]);for(var i=[[1,-1],[1,0],[0,1],[-1,1]],c=4;c>0;){var l=o+i[e=Math.floor(Math.random()*c)][0],d=s+i[e][1];l<0||l>=n||d<0||d>=n?(a[o+s*r].push([]),a[o+s*r][4-c].push(o),a[o+s*r][4-c].push(s)):(a[o+s*r].push([]),a[o+s*r][4-c].push(l),a[o+s*r][4-c].push(d)),c--,i.splice(e,1)}}this.setState({randomEntrances:a})}},{key:"countTotalMoves",value:function(){this.setState({totalMoves:++this.state.totalMoves})}},{key:"handleKeyUp",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,n=t.areaHeight;Number(a.y)%n-1>=0&&this.makeMove(a.x,a.y-1)}},{key:"handleKeyDown",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,n=t.areaHeight;Number(a.y)%n+1<n&&this.makeMove(a.x,a.y+1)}},{key:"handleKeyRight",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,n=t.areaWidth;Number(a.x)%n+1<n&&this.makeMove(a.x+1,a.y)}},{key:"handleKeyLeft",value:function(e){e.preventDefault();var t=this.state,a=t.playerPosition,n=t.areaWidth;Number(a.x)%n-1>=0&&this.makeMove(a.x-1,a.y)}},{key:"makeMove",value:function(e,t){var a=this.state,n=a.playerPosition,r=a.randomEntrances,s=a.boardHeight,o=a.boardWidth,i=a.areaWidth,c=a.areaHeight,l=a.win,d={x:n.x,y:n.y},u=e%i,h=t%c;if(0===u&&0===h||u===i-1&&0===h||u===i-1&&h===c-1||0===u&&h===c-1){var m;m=0===u&&0===h?0:u===i-1&&0===h?1:u===i-1&&h===c-1?2:3;var j=Math.floor(e/i),b=Math.floor(t/c),p=r[j+b*o][m][0]*i+Math.floor(i/2),y=r[j+b*o][m][1]*c+Math.floor(c/2);n.x=p,n.y=y,Math.floor(p/i)===o-1&&Math.floor(y/c)===s-1&&(l=!0)}else n.x=e,n.y=t;this.setState({playerPosition:n,prevPlayerPos:d,win:l}),this.countTotalMoves()}},{key:"render",value:function(){var e=this.state,t=e.playerPosition,a=e.randomEntrances,n=e.boardWidth,r=e.areaWidth,s=e.areaHeight,o=e.totalMoves,i=e.win,c="*GM Mode* Coordinates: ("+t.x+", "+t.y+") ",l=Math.floor(t.x/r)+Math.floor(t.y/s)*n;if(c+="Entrance: ",a[l])for(var d=0;d<4;d++)c+="("+a[l][d][0]+", "+a[l][d][1]+") ";return i&&(i=!1,alert("You win! Total moves: "+o)),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"status",children:c}),Object(g.jsx)(Z.b,{keyEventName:Z.a,keyValue:"ArrowUp",onKeyHandle:this.handleKeyUp}),Object(g.jsx)(Z.b,{keyEventName:Z.a,keyValue:"ArrowDown",onKeyHandle:this.handleKeyDown}),Object(g.jsx)(Z.b,{keyEventName:Z.a,keyValue:"ArrowRight",onKeyHandle:this.handleKeyRight}),Object(g.jsx)(Z.b,{keyEventName:Z.a,keyValue:"ArrowLeft",onKeyHandle:this.handleKeyLeft}),this.state.showGameBoard&&Object(g.jsx)(X,{randomPositions:this.state.randomPositions,boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,areaWidth:this.state.areaWidth,areaHeight:this.state.areaHeight,playerPosition:this.state.playerPosition,prevPlayerPos:this.state.prevPlayerPos,totalMoves:this.state.totalMoves})," "]})}}]),a}(n.Component);var ee=function(e){var t=e.setMode;return Object(g.jsx)("button",{size:"lg",variant:"primary",onClick:function(){t("Home")},children:"Home"})};var te=function(){var e=r.a.useState(sessionStorage.getItem("userID")),t=Object(i.a)(e,2),a=t[0],n=t[1],s=r.a.useState(sessionStorage.getItem("username")),o=Object(i.a)(s,2),u=o[0],h=o[1],m=r.a.useState(null),j=Object(i.a)(m,2),b=j[0],p=j[1],y=r.a.useState(null),f=Object(i.a)(y,2),v=f[0],O=f[1],x=r.a.useState("Home"),k=Object(i.a)(x,2),_=k[0],w=k[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)(R,{userID:a,username:u,setUserID:n,setUsername:h}),"Game"===_?Object(g.jsx)(g.Fragment,{}):Object(g.jsx)(c.a,{fluid:!0,children:Object(g.jsxs)(l.a,{children:[Object(g.jsx)(d.a,{children:Object(g.jsx)(T,{roomid:v,userid:a,name:u})}),Object(g.jsx)(d.a,{children:null!==v?Object(g.jsx)(q,{roomid:v,roomname:b,playername:u,playerid:a,setGameroomenter:p,setGameroomid:O}):"FindingRoom"===_?Object(g.jsx)(Y,{user_id:a,user_name:u,setGameroomenter:p,setGameroomid:O}):"Demo"===_?Object(g.jsx)($,{}):Object(g.jsx)(E,{setMode:w})})]})}),Object(g.jsx)(ee,{setMode:w})]})};o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(te,{})}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.841d49e2.chunk.js.map